# Alert system

Система алертов для приложения

## Description
Скрипт для проверки метрик на аномальные значения.

**Метрики** 
- активные пользователи в ленте
- активные пользователи в мессенджере
- просмотры
- лайки
- CTR
- количество отправленных сообщений

**Срезы**
- all
- OS
- source
- country (Russia и остальные)  


### Алгоритм проверки на аномалии
**Межквартильный размах**
- Берем 2-х недельную историю изменений значения текущей 15-ти минутки
- Считаем по этим значениям квартили Q1 и Q3, находим межквартильный размах IQR
- Находим предельную нижнюю и верхнюю границу допустимых значений метрики:
`Q1 - a * IQR и Q3 + a * IQR`


## Installation
Склонируйте репозиторий, задайте переменные окружения:
- REPORT_BOT_TOKEN – токен телеграм бота
- REPORT_CHAT_ID – id чата, в который необходимо отправлять отчет

В файле `config.py` можно настроить метрики, срезы и коэффициенты алгоритма проверки.

## Usage
Для запуска используйте скрипт `alert_bot.py`
```bash
export REPORT_CHAT_ID=<chat_id>
export REPORT_BOT_TOKEN=<telegram_bot_token>
python alert_bot.py
```

